<div class="relative w-fit bg-red-500">
  <div
    (click)="isOpen.set(!isOpen())"
    class="flex items-center justify-center w-8 h-20 absolute z-50 -right-8 top-[50%] bottom-[50%] cursor-pointer bg-white rounded-e-lg"
  >
    <span
      [class]="
        isOpen() ? 'icon-[ep--arrow-left-bold]' : 'icon-[ep--arrow-right-bold]'
      "
      style="width: 20px; height: 20px"
    ></span>
  </div>
  <div
    [class]="isOpen() ? 'md:w-[16rem]' : 'w-fit'"
    class="w-[90vw] max-w-[17rem] bg-white max-h-screen overflow-hidden p-3 relative"
  >
    <img
      class="cursor-pointer mx-auto"
      [routerLink]="['/dashboard']"
      [width]="isOpen() ? '320' : '50'"
      [height]="isOpen() ? '80' : '40'"
      [src]="isOpen() ? '/icons/logo-full.svg' : '/icons/logo.svg'"
      alt="Logo"
    />

    <div class="max-h-[65vh] overflow-y-auto grid grid-cols-1 gap-2 mt-2">
      @for (route of routes; track route.displayName; let index = $index) {
      <a
        #navLink
        [routerLink]="route.route"
        [class]="isOpen() ? 'w-full' : 'w-auto'"
        class="flex items-center justify-start h-10 px-3 py-2 mx-auto text-xs font-normal text-gray-500 transition-all duration-200 rounded hover:bg-primary hover:text-white gap-x-2 text-start"
        routerLinkActive="bg-primary"
        matRipple
      >
        <span
          [class.text-white]="router.isActive(route.route, false)"
          [class]="route.icon"
          style="width: 24px; height: 24px"
        ></span>
        @if(isOpen()){
        <span [class]="router.isActive(route.route, false) ? 'text-white' : ''">
          {{ route.displayName }}
        </span>
        } @if(route.displayName == nav.Notifications){
        <span
          class="text-sm font-bold bg-primary text-white text-center w-auto h-auto p-2 rounded"
          >{{ notifications().length }}</span
        >
        }
      </a>
      }
    </div>

    <div class="flex flex-col justify-between w-full h-[20%] gap-3 py-2">
      <div class="self-start w-full h-[50%]">
        <button
          #settingBtn
          matRipple
          routerLink="/setting"
          routerLinkActive="text-primary bg-accent"
          class="flex items-center justify-start w-full h-10 px-3 py-2 mx-auto text-sm font-semibold text-gray-300 transition-all duration-200 rounded hover:bg-accent hover:text-primary gap-x-4 text-start"
        >
          <span></span>
          <span> Setting </span>
        </button>

        <button
          #logoutBtn
          matRipple
          class="flex items-center justify-start w-full h-10 px-3 py-2 mx-auto text-sm font-semibold text-gray-300 transition-all duration-200 rounded hover:bg-accent hover:text-primary gap-x-4 text-start"
        >
          <span></span>
          Logout
        </button>
      </div>
      <div class="flex items-center h-[50%]">
        <div classes="w-12 h-12 text-xl font-bold"></div>
        <div class="flex flex-col items-center h-full gap-2 ml-2">
          <p class="self-start text-xs font-semibold text-white">
            {{ user().fullName | truncate : 50 }}
          </p>
          <p class="self-start text-xs font-normal text-white">
            {{ user().email | truncate : 50 }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
